"use strict";function pingStatus(){$j(".server-ping").each(function(){if("timeout"===$j(this).children("p").html())return void $j(this).addClass("ping-status-timeout");var a=parseInt($j(this).children("p").html());$j(this).addClass(100>a?"ping-status-green":a>100&&300>a?"ping-status-orange":"ping-status-red")})}function hideDropDownScroll(){$j("div[data-scroll]").each(function(){var a=$j("#"+$j(this).attr("data-scroll"));0!==$j(a).length&&$j(a).getNiceScroll().hide()})}function hideAllpDropDowns(){$j("a[data-notifications]").each(function(){var a=$j("#"+$j(this).attr("data-notifications"));a.hasClass("pDropOpen")&&(a.removeClass("pDropOpen"),hideDropDownScroll())})}function resizeDataTables(){0!==$j(".ticketList .dataTables_scrollBody").length&&$j(".ticketList .dataTables_scrollBody").css({height:$j(".ticketList").height()-$j(".dataTables_scrollHead").height()+"px"})}function resizeFullHeight(){var a=$j(".full-height");$j.each(a,function(){var a=$j(window).height();"solid"===$j(this).css("borderTopStyle")&&(a-=1),$j(this).css("overflow","hidden"),$j(this).height(a-$j(this).offset().top)})}var $j=jQuery.noConflict();$j(document).foundation(),$j(window).resize(function(){resizeFullHeight(),resizeDataTables(),hideAllpDropDowns(),hideDropDownScroll()}),$j(window).load(function(){$j(window).resize()}),function(){pingStatus(),resizeFullHeight(),$j("#ticketTable").dataTable({searching:!1,bLengthChange:!1,bPaginate:!1,bInfo:!1,scrollY:"0px"}).rowGrouping({iGroupingColumnIndex:1,sGroupingColumnSortDirection:"asc",iGroupingOrderByColumnIndex:0,bHideGroupingColumn:!1,bHideGroupingOrderByColumn:!1}),resizeDataTables(),$j("#ticketTable tbody tr[data-ticket] td").click(function(){var a=($j(this).parent("tr[data-ticket]").attr("data-ticket"),$j(this).find("input[type=checkbox]"));return 0!==$j(a).length?!0:void 0}),$j(".scrollable").each(function(){$j(this).niceScroll({cursorcolor:"#a9b1bf",cursorwidth:7,cursorborder:"1px solid #fff"})}),$j("a[data-notifications]").each(function(){$j(this).click(function(){var a=$j("#"+$j(this).attr("data-notifications")),b=$j("#"+$j(a).attr("data-scroll"));if("visible"===a.css("visibility"))return a.removeClass("pDropOpen"),void hideDropDownScroll();var c=$j(this).offset().left-250+"px",d=$j(this).outerHeight()+"px";$j(a).addClass("pDropOpen"),$j(a).css({position:"absolute",left:c,top:d}),$j(b).getNiceScroll().length<1&&$j(b).niceScroll({cursorcolor:"#a9b1bf",cursorwidth:7,cursorborder:"1px solid #fff"}),$j(b).getNiceScroll().resize(),$j(b).getNiceScroll().show()})}),$j(document).mouseup(function(a){$j("a[data-notifications]").each(function(){var b=$j("#"+$j(this).attr("data-notifications"));0===$j(this).has(a.target).length&&(b.is(a.target)||0!==b.has(a.target).length||b.hasClass("pDropOpen")&&(b.removeClass("pDropOpen"),hideDropDownScroll()))})}),$j(".message-items > li").click(function(){var a=$j(this).find("a");if(a.length){var b=a.attr("href");b.length&&(window.location.href=b)}}),$j("ul.side-nav>li>a[data-sub-menu]").click(function(a){var b=$j("#"+$j(this).attr("data-sub-menu"));return $j(b).length<1?void a.preventDefault():void 0}),$j("span[data-ptooltip]").each(function(){var a=$j(this).attr("data-title"),b=$j(this).attr("data-ptooltip-type"),c="<div class='ptooltip-box-wrap' data-ptooltip-id='"+$j(this).attr("id")+"'><div class='ptooltip-box'><span>"+a+"</span>";if("service"===b.toLowerCase()){var d=$j(this).attr("data-service-status"),e="#fff";("starting"===d.toLowerCase()||"stopping"===d.toLowerCase())&&(e="#e77c3c"),"running"===d.toLowerCase()&&(e="#29b955"),"stopped"===d.toLowerCase()&&(e="#e54242"),c+="<span>Status: <span style='color: "+e+";'>"+d+"</span>"}else if("dailyticket"===b.toLowerCase()){var f=$j(this).attr("data-new-count"),g=$j(this).attr("data-closed-count");c+="<span><span style='color: #e74c3c'>"+f+"</span> New / <span style='color: #3498db'>"+g+"</span> Closed</span>"}c+="</div></div>";var h=$j("<div></div>").css({position:"relative"});h.append(c),$j(this).append(h)}),$j("span[data-ptooltip]").hover(function(){var a=$j(this).attr("id");$j('div.ptooltip-box-wrap[data-ptooltip-id="'+a+'"]').show()},function(){var a=$j(this).attr("id");$j('div.ptooltip-box-wrap[data-ptooltip-id="'+a+'"]').hide()}),$j(".donutchart").each(function(){var a=$j(this).attr("data-trackColor");(null==a||a.length<=0)&&(a="#e74c3c");var b=$j(this).attr("data-numCount");(null==b||b.length<=0)&&(b=!1),$j(this).easyPieChart({size:150,lineCap:"round",lineWidth:8,scaleColor:!1,barColor:a,trackColor:"#b5bbc9",onStart:function(){$j(this.el).find(".chart-value").text("0")},onStop:function(a,c){if(b){var d=parseInt($j(this.el).attr("data-totalNumCount"));return $j(this.el).find(".chart-value").text(d),!0}$j(this.el).find(".chart-value").text(Math.round(c))},onStep:function(a,c,d){if(b){var e=parseInt($j(this.el).attr("data-totalNumCount")),f=parseInt($j(this.el).find(".chart-value").text());if(null!=e&&e>0&&null!=f){var g=Math.round(e*(100/Math.round(c))),h=.01*g*Math.round(d);return $j(this.el).find(".chart-value").text(Math.round(h)),!0}}$j(this.el).find(".chart-value").text(Math.round(d))}})}),$j("#ticketBarChart > .bar").each(function(){var a=$j(this),b=a.attr("data-percent"),c=1.7*b;a.find("span.bar-track").height(0),a.find("span.bar-track").animate({height:c},1e3)})}();