<div ng-controller="accountsCtrl">
    <div id="__accounts-page" class="hide">{{data.page}}</div>
    <div class="small-12 large-10 columns nopadding ticketContent" style="background: #f6f8fb;">
        <div class="page-title noshadow dt-borderBottom" style="margin-bottom: 15px;">
            <div class="small-2 columns">
                <p class="left">Accounts</p>
            </div>
            <div class="small-10 columns right">
                <div class="md-fab-wrapper">
                    <a class="md-fab md-fab-accent" href="/accounts/create">
                        <i class="material-icons" style="color: white;">add</i>
                    </a>
                </div>
                <div class="uk-grid" data-uk-grid-margin>
                    <div class="uk-width-medium-1-2">
                        <div class="uk-vertical-align">
                            <div class="uk-vertical-align-midle">
                                <ul id="account_list_filter" class="uk-subnav uk-subnav-pill" style="margin-top: 20px">
                                    <li class="uk-active filter-all uk-margin-remove" data-uk-filter=""><a href="#" class="no-ajaxy">All</a>
                                    </li>
                                    <li class="uk-margin-remove" data-uk-filter="admin"><a href="#" class="no-ajaxy">Administrators</a>
                                    </li>
                                    <li class="uk-margin-remove" data-uk-filter="mod"><a href="#" class="no-ajaxy">Moderators</a>
                                    </li>
                                    <li class="uk-margin-remove" data-uk-filter="user"><a href="#" class="no-ajaxy">Users</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="uk-width-medium-1-2">
                        <div class="md-input-wrapper" style="margin-top: 15px;">
                            <label for="account_list_search">Find Account</label>
                            <input type="text" class="md-input uk-margin-remove" id="account_list_search"/>

                            <div class="md-input-bar"></div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div class="full-height1">
        <div class="full-height scrollable" style="background: #f6f8fb; padding: 0 15px;">
            <div class="account-list-wrapper" style="padding-bottom: 50px;">
                <div id="account_list" class="uk-grid-width-small-1-2 uk-grid-width-medium-1-3 uk-grid-width-large-1-4 uk-grid-width-xlarge-1-5">
                    {{#each data.accounts}}
                        <div data-uk-filter="{{role}},{{fullname}}">
                            <div class="tru-card tru-card-hover" data-card-username="{{username}}">
                                <div class="tru-card-head {{#compare role '==' 'admin'}} tru-card-head-admin {{/compare}}">
                                    <div class="tru-card-head-menu" data-uk-dropdown="{pos: 'bottom-right'}">
                                        <i class="material-icons tru-icon">&#xE5D4;</i>

                                        <div class="uk-dropdown uk-dropdown-small">
                                            <ul class="uk-nav">
                                                <li><a href="/accounts/{{username}}">Edit</a></li>
                                                <li><a href="#" data-username="{{username}}"
                                                       ng-click="deleteAccount($event)">Remove</a></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="text-center">
                                        {{#if image}}
                                            <img src="/uploads/users/{{image}}" alt="Profile Pic"
                                                 class="tru-card-head-avatar"/>
                                        {{else}}
                                            <img src="/uploads/users/defaultProfile.jpg" alt="Profile Pic"
                                                 class="tru-card-head-avatar"/>
                                        {{/if}}
                                    </div>
                                    <h3 class="tru-card-head-text text-center">
                                        {{fullname}}
                                        <span class="uk-text-truncate">{{firstCap title}}</span>
                                    </h3>
                                </div>
                                <div class="tru-card-content">
                                    <ul class="tru-list">
                                        <li>
                                            <div class="tru-list-content">
                                                <span class="tru-list-heading">Role</span>
                                                <span class="uk-text-small uk-text-muted">{{firstCap role}}</span>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="tru-list-content">
                                                <span class="tru-list-heading">Email</span>
                                            <span class="uk-text-small uk-text-muted uk-text-truncate"><a
                                                    href="mailto:{{email}}">{{email}}</a></span>
                                            </div>
                                        </li>
                                        <li>
                                            <div class="tru-list-content">
                                                <span class="tru-list-heading">Groups</span>
                                            <span class="uk-text-small uk-text-muted uk-text-truncate">
                                                {{#each groups}}
                                                    {{this}}{{#compare (size ../groups) '>' 1}}, {{/compare}}
                                                {{/each}}
                                            </span>
                                            </div>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    {{/each}}

                </div>
                <div id="scrollspy" class="uk-text-center">
                    <i class="uk-icon-refresh uk-icon-spin"></i>
                </div>
            </div>

        </div>
    </div>
</div>
{{#contentFor 'js-plugins'}}
    <script type="text/javascript">
        require(['pages/accounts'], function (a) {
            a.init();
        });
    </script>
{{/contentFor}}